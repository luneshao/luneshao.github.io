<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="baidu-site-verification" content="8GUMFEgBhB" />
  <meta name="author" content="LuneShao">
  <meta name="description" content="è¿™é‡Œæ˜¯luneçš„ä¸ªäººåšå®¢ï¼Œä¸»è¦è®°å½•äº†å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæ¬¢è¿å„ä½å¤§ä½¬è¿›æ¥å–èŒ¶ã€‚å¦‚æœæ–‡ç« ä¸­æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¿˜è¯·å„ä½å¤§ä½¬ä¸åèµæ•™ï¼Œä¸‡åˆ†æ„Ÿè°¢ã€‚">
  <meta name="keywords" content="luneshaoï¼Œä¸€ç“¶è‚¥å®…å¿«ä¹æ°´ï¼Œåšå®¢ï¼Œå‰ç«¯ï¼Œå°éª¨é±¼">
  <meta name="google-site-verification" content="Gu27F60AgLNf8h9KCAXsLXjKd7O-e1oZpSGeblt5w70" />
  <link rel="prev" href="https://luneshao.github.io/2020/2020-04-29-setupvpn/" />
  <link rel="next" href="https://luneshao.github.io/2020/2020-05-21-nginx/" />
  <link rel="canonical" href="https://luneshao.github.io/2020/2020-05-20-vue-perf/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="icon" href="/img/favicon.ico" />
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Vue é¡¹ç›®ä¼˜åŒ– | Luneshao
       
  </title>
  <meta name="title" content="Vue é¡¹ç›®ä¼˜åŒ– | Luneshao">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/luneshao.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "Vue é¡¹ç›®ä¼˜åŒ–",
    "headline" : "Vue é¡¹ç›®ä¼˜åŒ–",
    "description" : "ä»‹ç»äº† vue é¡¹ç›®ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å­—ä½“åŠ è½½åŠå‹ç¼©ã€å›¾ç‰‡æ‡’åŠ è½½ã€antd æ‰“åŒ…ä¼˜åŒ–ã€‚",
    "inLanguage" : "en-us",
    "author" : "LuneShao",
    "creator" : "LuneShao",
    "publisher": "LuneShao",
    "accountablePerson" : "LuneShao",
    "copyrightHolder" : "LuneShao",
    "copyrightYear" : "2020",
    "datePublished": "2020-05-20 00:00:00 \x2b0000 UTC",
    "dateModified" : "2020-05-20 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/luneshao.github.io\/2020\/2020-05-20-vue-perf\/",
    "wordCount" : "510",
    "keywords" : [ "vue","å‰ç«¯", "Luneshao"]
}
</script>

  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1858143_e4r74dhzeku.css">
</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://luneshao.github.io/">Luneshao</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/" title="">é¦–é¡µ</a>
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/about/" title=""></a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://luneshao.github.io/">Luneshao</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/" title="">é¦–é¡µ</a>
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/about/" title=""></a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Vue é¡¹ç›®ä¼˜åŒ–</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://luneshao.github.io/" rel="author">LuneShao</a> with â™¥ 
                <span class="post-time">
                on <time datetime=2020-05-20 itemprop="datePublished">May 20, 2020</time>
                </span>
                in
                
                <span id="/2020/2020-05-20-vue-perf/" class="leancloud_visitors post-meta" data-flag-title="Vue é¡¹ç›®ä¼˜åŒ–">
                    <span style="font-size: 14px;margin-left: 20px;">æœ¬æ–‡ç´¯è®¡è¢«é˜…è¯» <i class="leancloud-visitors-count"></i> æ¬¡</span>
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          

<h2 id="1-å­—ä½“ä¼˜åŒ–">1ã€å­—ä½“ä¼˜åŒ–</h2>

<h3 id="1-1-å­—ä½“åŒ…å‹ç¼©">1.1 å­—ä½“åŒ…å‹ç¼©</h3>

<p>ä½¿ç”¨ <a href="https://github.com/ecomfe/fontmin" rel="nofollow noreferrer" target="_blank">fontmin</a> è¿™ä¸ªåº“å‹ç¼©å­—ä½“åŒ…ã€‚ï¼ˆå­—ä½“ä¸‹è½½åœ°å€ <a href="http://www.font168.com/" rel="nofollow noreferrer" target="_blank">å­—ä½“ä¸‹è½½ç½‘</a> ï¼Œè¿™ä¸ªä¸‹è½½çš„è‹¹æ–¹ç®€-å¸¸è§„å¯ä»¥è¢«æ ¼å¼åŒ–ã€‚ï¼‰</p>

<pre><code class="language-js">const Fontmin = require('fontmin')

const srcPath = './path/*.ttf' // å­—ä½“æºæ–‡ä»¶
const destPath = './path' // è¾“å‡ºè·¯å¾„
const text = 'text'

var fontmin = new Fontmin()
  .src(srcPath)
  .dest(destPath)
  .use(
    Fontmin.glyph({
      text: text,
      hinting: false // keep ttf hint info (fpgm, prep, cvt). default = true
    })
  )

// æ‰§è¡Œ
fontmin.run(function (err, files, stream) {
  if (err) {
    console.error(err) // å¼‚å¸¸æ•æ‰
  }
  console.log('done') // æˆåŠŸ
})
</code></pre>

<h3 id="1-2-ä¼˜åŒ–å­—ä½“åŒ…åŠ è½½å‰çš„æ–‡æœ¬éšè—-from-font-display-çš„ç”¨æ³•-https-www-w3cplus-com-css-font-display-masses-html">1.2 ä¼˜åŒ–å­—ä½“åŒ…åŠ è½½å‰çš„æ–‡æœ¬éšè— [from <a href="https://www.w3cplus.com/css/font-display-masses.html" rel="nofollow noreferrer" target="_blank">font-display çš„ç”¨æ³•</a>]</h3>

<ol>
<li><p><code>@font-face</code> ä¸­ä½¿ç”¨ <code>font-display</code> å±æ€§</p>

<pre><code class="language-css">/* style.css */
@font-face {
font-family: 'test'; /* æ‰€æŒ‡å®šçš„å­—ä½“åå­—å°†ä¼šè¢«ç”¨äºfontæˆ–font-familyå±æ€§ */
/* 
  srcæè¿°ç¬¦æŒ‡å®šäº†åŒ…å«å­—ä½“æ•°æ®çš„èµ„æºã€‚
  è¿œç¨‹å­—ä½“æ–‡ä»¶ä½ç½®çš„URLæˆ–è€…ç”¨æˆ·è®¡ç®—æœºä¸Šçš„å­—ä½“åç§°ï¼Œ
  å¯ä»¥ä½¿ç”¨localè¯­æ³•é€šè¿‡åç§°æŒ‡å®šç”¨æˆ·çš„æœ¬åœ°è®¡ç®—æœºä¸Šçš„å­—ä½“ã€‚
  å¦‚æœæ‰¾ä¸åˆ°è¯¥å­—ä½“ï¼Œå°†ä¼šå°è¯•å…¶ä»–æ¥æºï¼Œç›´åˆ°æ‰¾åˆ°å®ƒã€‚
*/
src: url('test.woff2') format('woff2');
font-display: swap;
}
</code></pre></li>

<li><p>è€ƒè™‘å…¼å®¹æ€§ï¼Œä½¿ç”¨ js åˆ¤æ–­å­—ä½“åŒ…åŠ è½½å®Œæ¯•åï¼Œæ·»åŠ å­—ä½“è®¾ç½®ã€‚</p>

<pre><code class="language-js">// font.js
if ('fontDisplay' in document.body.style === false) {
  if ('fonts' in document) {
    document.fonts.load('test')
    document.fonts.ready.then((fontFaceSet) =&gt; {
      document.documentElement.className += ' fonts-loaded' 
    })
  }
}
</code></pre></li>
</ol>

<h3 id="1-3-å­—ä½“åŒ…-preload">1.3 å­—ä½“åŒ… preload</h3>

<p>æ·»åŠ  preload-webpack-plugin åŒ…</p>

<pre><code class="language-cmd">  $ yarn add preload-webpack-plugin --dev
</code></pre>

<p>åœ¨ vue.config.js ä¸­é…ç½®</p>

<pre><code class="language-js">  // vue.config.js
  const PreloadWebpackPlugin = require('preload-webpack-plugin')

  module.exports = {
    configureWebpack: config =&gt; {
      return {
        plugins: [new PreloadWebpackPlugin({
          rel: 'preload',
          include: 'allAssets',
          as (entry) { // link as å±æ€§
            if (/\.ttf$/.test(entry)) return 'font'
            if (/\.jpg$/.test(entry)) return 'image'
            return 'script'
          },
          fileWhitelist: [/\.ttf/, /banner[^-]*\.jpg/] // ç™½åå•
        })]
      }
    }
  }
</code></pre>

<h3 id="ç›¸å…³çŸ¥è¯†è¡¥å……">ç›¸å…³çŸ¥è¯†è¡¥å……</h3>

<ul>
<li><p><code>font-display</code> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@font-face/font-display" rel="nofollow noreferrer" target="_blank">font-display MDN</a></p>

<p>font-displayå±æ€§å¿…é¡»åœ¨@font-faceæŒ‡ä»¤å†…ä½¿ç”¨ã€‚å› ä¸ºä½ ä¸èƒ½æ§åˆ¶ç¬¬ä¸‰æ–¹å­—ä½“ä¾›åº”å•†çš„CSSæ–‡ä»¶ï¼Œæ‰€ä»¥ä½ æ²¡æœ‰åŠæ³•æ§åˆ¶font-displayå±æ€§æ›´ç”¨è¯´ç»™ä»–ä¼ é€’å€¼äº†ã€‚
  å†³å®šäº†ä¸€ä¸ª@font-face åœ¨ä¸åŒçš„ä¸‹è½½æ—¶é—´å’Œå¯ç”¨æ—¶é—´ä¸‹æ˜¯å¦‚ä½•å±•ç¤ºçš„ã€‚</p>

<p><strong>å­—ä½“æ˜¾ç¤ºæ—¶é—´è½´</strong></p>

<p>å­—ä½“æ˜¾ç¤ºæ—¶é—´çº¿åŸºäºä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè¯¥è®¡æ—¶å™¨åœ¨ç”¨æˆ·ä»£ç†å°è¯•ä½¿ç”¨ç»™å®šä¸‹è½½å­—ä½“çš„é‚£ä¸€åˆ»å¼€å§‹ã€‚æ—¶é—´çº¿åˆ†ä¸ºä¸‰ä¸ªæ—¶é—´æ®µï¼Œåœ¨è¿™ä¸‰ä¸ªæ—¶é—´æ®µä¸­æŒ‡å®šä½¿ç”¨å­—ä½“çš„å…ƒç´ çš„æ¸²æŸ“è¡Œä¸ºã€‚</p>

<pre><code>- **å­—ä½“é˜»å¡å‘¨æœŸ**
  å¦‚æœæœªåŠ è½½å­—ä½“ï¼Œä»»ä½•è¯•å›¾ä½¿ç”¨å®ƒçš„å…ƒç´ éƒ½å¿…é¡»æ¸²æŸ“ä¸å¯è§çš„åå¤‡å­—ä½“ã€‚å¦‚æœåœ¨æ­¤æœŸé—´å­—ä½“å·²æˆåŠŸåŠ è½½ï¼Œåˆ™æ­£å¸¸ä½¿ç”¨å®ƒã€‚

- **å­—ä½“äº¤æ¢å‘¨æœŸ**
  å¦‚æœæœªåŠ è½½å­—ä½“ï¼Œä»»ä½•å°è¯•ä½¿ç”¨å®ƒçš„å…ƒç´ éƒ½å¿…é¡»å‘ˆç°åå¤‡å­—ä½“ã€‚å¦‚æœåœ¨æ­¤æœŸé—´å­—ä½“å·²æˆåŠŸåŠ è½½ï¼Œåˆ™æ­£å¸¸ä½¿ç”¨å®ƒã€‚

- **å­—ä½“å¤±è´¥å‘¨æœŸ**
  å¦‚æœæœªåŠ è½½å­—ä½“ï¼Œç”¨æˆ·ä»£ç†å°†å…¶è§†ä¸ºå¯¼è‡´æ­£å¸¸å­—ä½“å›é€€çš„å¤±è´¥åŠ è½½ã€‚
</code></pre>

<p><strong>å±æ€§å€¼</strong></p>

<pre><code>- `auto` é»˜è®¤å€¼ï¼Œå­—ä½“æ˜¾ç¤ºç­–ç•¥ç”±ç”¨æˆ·ä»£ç†å®šä¹‰ã€‚è‡ªå®šä¹‰å­—ä½“çš„æ–‡æœ¬ä¼šè¢«å…ˆéšè—ï¼Œç›´åˆ°å­—ä½“åŠ è½½ç»“æŸæ‰ä¼šæ˜¾ç¤ºã€‚
- `block` ä¸ºå­—ä½“æä¾›ä¸€ä¸ªçŸ­æš‚çš„é˜»å¡å‘¨æœŸå’Œæ— é™çš„äº¤æ¢å‘¨æœŸã€‚
- `swap` ä¸ºå­—ä½“æä¾›ä¸€ä¸ªéå¸¸å°çš„é˜»å¡å‘¨æœŸå’Œæ— é™çš„äº¤æ¢å‘¨æœŸã€‚åå¤‡æ–‡æœ¬ç«‹å³æ˜¾ç¤ºç›´åˆ°è‡ªå®šä¹‰å­—ä½“åŠ è½½å®Œæˆåå†ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“æ¸²æŸ“æ–‡æœ¬ã€‚
- `fallback` ä¸ºå­—ä½“æä¾›ä¸€ä¸ªéå¸¸å°çš„é˜»å¡å‘¨æœŸå’ŒçŸ­æš‚çš„äº¤æ¢å‘¨æœŸã€‚éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“æ¸²æŸ“çš„æ–‡æœ¬ä¼šåœ¨è¾ƒçŸ­æ—¶é—´å†…ä¸å¯è§ï¼Œå¦‚æœè‡ªå®šä¹‰å­—ä½“è¿˜æ²¡åŠ è½½ç»“æŸï¼Œå°±å…ˆåŠ è½½æ— æ ·å¼æ–‡æœ¬ã€‚ä¸€æ—¦è‡ªå®šä¹‰å­—ä½“åŠ è½½ç»“æŸï¼Œé‚£ä¹ˆæ–‡æœ¬å°±ä¼šè¢«æ­£ç¡®èµ‹äºˆæ ·å¼ã€‚
- `optional` ä¸ºå­—ä½“æä¾›ä¸€ä¸ªéå¸¸å°çš„é˜»å¡å‘¨æœŸï¼Œå¹¶ä¸”æ²¡æœ‰äº¤æ¢å‘¨æœŸã€‚æ•ˆæœå’Œfallbackå‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ optional å¯ä»¥è®©æµè§ˆå™¨è‡ªç”±å†³å®šæ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæµè§ˆå™¨çš„è¿æ¥é€Ÿåº¦ã€‚å¦‚æœé€Ÿåº¦å¾ˆæ…¢ï¼Œé‚£è‡ªå®šä¹‰å­—ä½“å°†ä¸ä¼šè¢«ä½¿ç”¨ã€‚
</code></pre></li>

<li><p><code>@font-face</code> ä¸­ src å±æ€§çš„ format å‡½æ•°</p>

<p>format() å‡½æ•°æè¿°è¯¥URLå¼•ç”¨çš„å­—ä½“èµ„æºçš„æ ¼å¼çš„å¯é€‰æç¤ºã€‚
  æ ¼å¼æç¤ºåŒ…å«é€—å·åˆ†éš”çš„æ ¼å¼å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œè¿™äº›å­—ç¬¦ä¸²è¡¨ç¤ºä¼—æ‰€å‘¨çŸ¥çš„å­—ä½“æ ¼å¼ã€‚
  å¦‚æœç”¨æˆ·ä»£ç†ä¸æ”¯æŒæŒ‡å®šçš„æ ¼å¼ï¼Œå®ƒå°†è·³è¿‡ä¸‹è½½å­—ä½“èµ„æºã€‚å¦‚æœæ²¡æœ‰æä¾›æ ¼å¼æç¤ºï¼Œåˆ™å§‹ç»ˆä¸‹è½½å­—ä½“èµ„æºã€‚</p></li>

<li><p><code>document.documentElement</code></p>

<p>å¯¹äºä»»ä½•éç©º HTML æ–‡æ¡£ï¼Œè°ƒç”¨ <code>document.documentElement</code> æ€»æ˜¯ä¼šè¿”å›ä¸€ä¸ª <code>&lt;html&gt;</code> å…ƒç´ ï¼Œä¸”å®ƒä¸€å®šæ˜¯è¯¥æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚å€ŸåŠ©è¿™ä¸ªåªè¯»å±æ€§ï¼Œèƒ½æ–¹ä¾¿åœ°è·å–åˆ°ä»»æ„æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚
  HTML æ–‡æ¡£é€šå¸¸åŒ…å«ä¸€ä¸ªå­èŠ‚ç‚¹ <html>ï¼Œä½†åœ¨å®ƒå‰é¢å¯èƒ½è¿˜æœ‰ä¸ª DOCTYPE å£°æ˜ã€‚XML æ–‡æ¡£é€šå¸¸åŒ…å«å¤šä¸ªå­èŠ‚ç‚¹ï¼šæ ¹å…ƒç´ ï¼ŒDOCTYPE å£°æ˜ï¼Œå’Œ processing instructionsã€‚</p>

<p>æ‰€ä»¥ï¼Œåº”å½“ä½¿ç”¨ document.documentElement æ¥è·å–æ ¹å…ƒç´ , è€Œä¸æ˜¯ document.firstChildã€‚</p></li>

<li><p><code>document.fonts</code></p>

<p>document.fonts è¿”å›æ–‡æ¡£çš„ <code>FontFaceSet</code> æ¥å£ã€‚<code>FontFaceSet</code> æ¥å£å¯¹äºåŠ è½½æ–°å­—ä½“ï¼Œæ£€æŸ¥å…ˆå‰åŠ è½½çš„å­—ä½“çš„çŠ¶æ€ç­‰éå¸¸æœ‰ç”¨ã€‚</p>

<p><strong>å±æ€§</strong> (ä¸å…¨é¢)</p>

<ul>
<li><code>FontFaceSet.status</code> æŒ‡ç¤ºå­—ä½“çš„åŠ è½½çŠ¶æ€ã€‚å°†æ˜¯ &lsquo;loading&rsquo; or &lsquo;loaded&rsquo;ã€‚</li>
<li><code>FontFaceSet.ready</code> Promise ä¼šåœ¨å­—ä½“åŠ è½½å’Œå¸ƒå±€æ“ä½œå®Œæˆå resolvesã€‚</li>
</ul>

<p><strong>æ–¹æ³•</strong> (ä¸å…¨é¢)</p>

<ul>
<li><code>FontFaceSet.check()</code> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå­—ä½“æ˜¯å¦åŠ è½½ï¼Œä½†æœªåŠ è½½æ—¶ä¸å¯åŠ¨åŠ è½½ã€‚</li>

<li><p><code>FontFaceSet.load()</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet/load" rel="nofollow noreferrer" target="_blank">FontFaceSet.load() MDN</a> è¯¥æ–¹æ³•å¼ºåˆ¶åŠ è½½å‚æ•°ä¸­ç»™å®šçš„æ‰€æœ‰å­—ä½“ã€‚è¿”å›ä¸€ä¸ªPromiseï¼Œè¯¥Promiseè§£æä¸ºæ‰€è¯·æ±‚å­—ä½“çš„å­—ä½“æ•°ç»„ã€‚</p>

<p><strong>å‚æ•°</strong>ï¼š</p>

<ul>
<li>font: å‚ç…§ css è¯­æ³•ä¸­ font å±æ€§çš„æ ¼å¼ã€‚eg: &lsquo;italic bold 16px Roboto&rsquo;</li>
<li>text: é™åˆ¶ font faces ç¼–ç èŒƒå›´è‡³å°‘è¦åŒ…å«çš„å­—ç¬¦ã€‚</li>
</ul></li>
</ul></li>

<li><p><code>&lt;link ref=&quot;preload&quot; ... &gt;</code> å‚è€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content" rel="nofollow noreferrer" target="_blank">æ–‡æ¡£</a></p></li>
</ul>

<h2 id="2-å›¾ç‰‡ä½¿ç”¨æ‡’åŠ è½½">2ã€å›¾ç‰‡ä½¿ç”¨æ‡’åŠ è½½</h2>

<p>ä½¿ç”¨ <a href="https://www.npmjs.com/package/vue-lazyload" rel="nofollow noreferrer" target="_blank">vue-lazyload</a> åº“ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼Œæ»šåŠ¨åˆ°æŸå¤„å†åŠ è½½å›¾ç‰‡ã€‚</p>

<h2 id="3-æ‰“åŒ…çº¿ä¸Šç‰ˆæœ¬-ä½¿ç”¨-cdn-å¼•å…¥åŒ…">3ã€æ‰“åŒ…çº¿ä¸Šç‰ˆæœ¬ï¼Œä½¿ç”¨ cdn å¼•å…¥åŒ…</h2>

<pre><code class="language-js">// --------------
// .env
// --------------
NODE_ENV === 'production'

// --------------
// vue.config.js
// --------------

const isProd = process.env.NODE_ENV === 'production'

const assetsCDN = {
  // webpack build externals
  externals: {
    vue: 'Vue',
    'vue-router': 'VueRouter',
    'vue-lazyload': 'VueLazyload',
  },
  css: ['//cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css'],
  js: [
    '//cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js',
    '//cdn.jsdelivr.net/npm/vue-router@3.1.6/dist/vue-router.min.js',
    '//cdn.jsdelivr.net/npm/vue-lazyload@1.3.3/vue-lazyload.min.js',
  ],
}

module.exports = {
  configureWebpack: (config) =&gt; {
    if (isProd) {
      return {
        // resolve: {
        //   alias: {
        //     '@ant-design/icons/lib/dist$': resolve('./src/core/antd/icons.js'),
        //   },
        // },
        externals: assetsCDN.externals,
        // plugins: [new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/)],
      }
    }
  },

  chainWebpack: (config) =&gt; {
    config.plugin('html').tap((args) =&gt; {
      args[0].title = process.env.VUE_APP_TITLE
      if (isProd) {
        args[0].cdn = assetsCDN
      }
      return args
    })
  },
}
</code></pre>

<pre><code class="language-html">&lt;!-- index.html --&gt;
...
&lt;!-- require cdn assets css --&gt;
&lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp; htmlWebpackPlugin.options.cdn.css) { %&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;&quot; /&gt;
&lt;% } %&gt; 
...
&lt;!-- require cdn assets js --&gt;
&lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp; htmlWebpackPlugin.options.cdn.js) { %&gt;
&lt;script
  type=&quot;text/javascript&quot;
  src=&quot;&lt;%= htmlWebpackPlugin.options.cdn.js[i] %&gt;&quot;
&gt;&lt;/script&gt;
&lt;% } %&gt;
</code></pre>

<h2 id="4-ant-design-vue-ç›¸å…³">4ã€ant-design-vue ç›¸å…³</h2>

<h3 id="4-1-æ‰“åŒ…å-icon-åŒ…ä½“ç§¯è¿‡å¤§">4.1 æ‰“åŒ…åï¼Œicon åŒ…ä½“ç§¯è¿‡å¤§</h3>

<p>å‚è€ƒæ­¤ <a href="https://github.com/vueComponent/ant-design-vue/issues/1109" rel="nofollow noreferrer" target="_blank">issue</a> ä½œè€…çš„<a href="https://github.com/vueComponent/ant-design-vue/issues/1109#issuecomment-563094161" rel="nofollow noreferrer" target="_blank">å›ç­”</a></p>

<h3 id="4-2-æ‰“åŒ…å-moment-åŒ…ä½“ç§¯è¿‡å¤§">4.2 æ‰“åŒ…åï¼Œmoment åŒ…ä½“ç§¯è¿‡å¤§</h3>

<p>å‚è€ƒæ­¤ä¼˜åŒ–æ–¹æ¡ˆ <a href="https://github.com/jmblog/how-to-optimize-momentjs-with-webpack" rel="nofollow noreferrer" target="_blank">github</a></p>

<h2 id="5-ä½¿ç”¨ç¼“å­˜">5ã€ä½¿ç”¨ç¼“å­˜</h2>

<h3 id="5-1-nginx-é…ç½®-last-modify-å’Œ-etag">5.1 nginx é…ç½® last-modify å’Œ etag</h3>

<pre><code class="language-nginx.conf">location ~.*\.(gif|jpg|jpeg|png|bmp|swf)$
{
    expiresÂ  Â  Â  30d;
}
location ~.*\.(js|css)?$
{
    expiresÂ  Â  Â  12h;
}
</code></pre>

<h3 id="ç›¸å…³çŸ¥è¯†ç‚¹">ç›¸å…³çŸ¥è¯†ç‚¹</h3>

<ul>
<li><a href="https://juejin.im/post/5b9346dcf265da0aac6fbe57" rel="nofollow noreferrer" target="_blank">å‰ç«¯ä¼˜åŒ–ï¼šæµè§ˆå™¨ç¼“å­˜æŠ€æœ¯ä»‹ç»</a></li>
<li><a href="https://blog.csdn.net/jiabeis/article/details/79653983" rel="nofollow noreferrer" target="_blank">nginxé…ç½®ç®¡ç†æµè§ˆå™¨é™æ€ç¼“å­˜ç­–ç•¥</a></li>
</ul>

<p>ä»¥ä¸Šã€‚</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>LuneShao </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://luneshao.github.io/2020/2020-05-20-vue-perf/>https://luneshao.github.io/2020/2020-05-20-vue-perf/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>
  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://luneshao.github.io/tags/vue/">
                    #vue</a></span>
            
            <span class="tag"><a href="https://luneshao.github.io/tags/%E5%89%8D%E7%AB%AF/">
                    #å‰ç«¯</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://luneshao.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://luneshao.github.io/2020/2020-04-29-setupvpn/" class="prev" rel="prev" title="Chrome ä¸Šç½‘æ’ä»¶ setupVPN"><i class="iconfont icon-left"></i>&nbsp;Chrome ä¸Šç½‘æ’ä»¶ setupVPN</a>
         
        
        <a href="https://luneshao.github.io/2020/2020-05-21-nginx/" class="next" rel="next" title="Nginx ç›¸å…³æ–‡ç« æ±‡æ€»">Nginx ç›¸å…³æ–‡ç« æ±‡æ€»&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
        <div id="vcomment"></div>
          
                 
          
    </div>
    <script>
        new Valine({
          el: '#vcomment' ,
          appId: 'VMtRNdHhQOQVoiWu2y2dQnJb-gzGzoHsz',
          appKey: '073437m7LGtKY9mmCQioFbKI',
          notify:true, 
          verify:false, 
          avatar:'wavatar', 
          recordIP: true,
          visitor: true, 
          placeholder: 'ä½ å¥½å“‡ï¼Œå¿«æ¥æˆ³æˆ‘åæ§½å§ï¼ğŸ‰' 
        })
    </script>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://luneshao.github.io/">LuneShao</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
