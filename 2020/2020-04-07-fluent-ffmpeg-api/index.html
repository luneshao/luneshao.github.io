<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="baidu-site-verification" content="8GUMFEgBhB" />
  <meta name="author" content="LuneShao">
  <meta name="description" content="这里是 LuneShao 的个人博客，主要记录了前端开发过程中遇到的问题，欢迎各位大佬进来喝茶。如果文章中有错误的地方，还请各位大佬不吝赐教，万分感谢。">
  <meta name="keywords" content="LuneShao, 一瓶肥宅快乐水, 博客, 前端, 小骨鱼">
  <meta name="google-site-verification" content="Gu27F60AgLNf8h9KCAXsLXjKd7O-e1oZpSGeblt5w70" />
  <link rel="prev" href="https://luneshao.github.io/2020/2020-04-02-tencent-server-ssh/" />
  <link rel="next" href="https://luneshao.github.io/2020/2020-04-09-riyupinyin/" />
  <link rel="canonical" href="https://luneshao.github.io/2020/2020-04-07-fluent-ffmpeg-api/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="icon" href="/img/favicon.ico" />
  
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1858143_e4r74dhzeku.css">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           node-fluent-ffmpeg 文档 | Luneshao
       
  </title>
  <meta name="title" content="node-fluent-ffmpeg 文档 | Luneshao">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/luneshao.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "node-fluent-ffmpeg 文档",
    "headline" : "node-fluent-ffmpeg 文档",
    "description" : "机翻fluent ffmpeg API，方便查看。",
    "inLanguage" : "en-us",
    "author" : "luneShao",
    "creator" : "luneShao",
    "publisher": "luneShao",
    "accountablePerson" : "luneShao",
    "copyrightHolder" : "luneShao",
    "copyrightYear" : "2020",
    "datePublished": "2020-04-07 10:36:26 \u002b0800 CST",
    "dateModified" : "2020-04-07 10:36:26 \u002b0800 CST",
    "url" : "https:\/\/luneshao.github.io\/2020\/2020-04-07-fluent-ffmpeg-api\/",
    "wordCount" : "2487",
    "keywords" : [ "ffmpeg", "Luneshao"]
}
</script>

  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://luneshao.github.io/">Luneshao</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/" title="">首页</a>
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/about/" title=""></a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://luneshao.github.io/">Luneshao</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/" title="">首页</a>
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/about/" title=""></a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">node-fluent-ffmpeg 文档</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://luneshao.github.io/" rel="author">luneShao</a> with ♥ 
                <span class="post-time">
                on <time datetime=2020-04-07 itemprop="datePublished">April 7, 2020</time>
                </span>
                in
                
                <span id="/2020/2020-04-07-fluent-ffmpeg-api/" class="leancloud_visitors post-meta" data-flag-title="node-fluent-ffmpeg 文档">
                    <span style="font-size: 14px;margin-left: 20px;">本文累计被阅读 <i class="leancloud-visitors-count"></i> 次</span>
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <p><a href="https://github.com/fluent-ffmpeg/node-fluent-ffmpeg">node-fluent-ffmpeg</a>
该库将 ffmpeg 的复杂命令行用法抽象为一个流畅，易于使用的 node.js 模块。为了能够使用此模块，请确保在系统上安装了<a href="http://www.ffmpeg.org/">ffmpeg</a>（包括所有必需的编码库，如 libmp3lame 或 libx264）。</p>
<h2 id="安装">安装</h2>
<p>npm</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">$ npm install fluent-ffmpeg
</code></pre></div><p>yarn</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">$ yarn add fluent-ffmpeg
</code></pre></div><p>或者作为一个 submodule</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">$ git submodule add git://github.com/schaermu/node-fluent-ffmpeg.git vendor/fluent-ffmpeg
</code></pre></div><h2 id="用法">用法</h2>
<p>你将在 <a href="https://github.com/fluent-ffmpeg/node-fluent-ffmpeg/tree/master/examples">examples</a> 文件夹中找到一些有用的例子。</p>
<h3 id="先决条件">先决条件</h3>
<h4 id="ffmpeg-and-ffprobe">ffmpeg and ffprobe</h4>
<p>fluent-ffmpeg 需要 ffmpeg&gt; = 0.9 才能工作。它可能与以前的版本一起使用，但是一些功能将不可用（并且不再对库进行较低版本的测试）。</p>
<p>如果设置了 FFMPEG_PATH 环境变量，fluent-ffmpeg 会将其用作 ffmpeg 可执行文件的完整路径。否则，它将尝试直接调用 ffmpeg（因此它应该在您的 PATH 中）。您还必须安装 ffprobe（大多数发行版随附 ffmpeg）。同样，fluent-ffmpeg 将使用 FFPROBE_PATH 环境变量（如果已设置），否则它将尝试在 PATH 中调用它。</p>
<p>当使用 avconv 和 avprobe 而不是 ffmpeg 和 ffprobe 时，大多数功能都可以使用，但是目前尚不正式支持。</p>
<p><strong>Windows 用户</strong>：ffmpeg 和 ffprobe 很可能不在您的％PATH 中，因此您必须设置％FFMPEG_PATH 和％FFPROBE_PATH。</p>
<p><strong>Debian / Ubuntu 用户</strong>：官方存储库在 libav-tools 软件包中具有 ffmpeg / ffprobe 可执行文件，并且它们实际上是重命名为 avconv / avprobe 可执行文件（avconv 是 ffmpeg 的分支）。它们应该基本兼容，但是如果您遇到任何问题，则可能要使用真正的 ffmpeg。您可以从源代码编译它，也可以在 <a href="https://ffmpeg.org/download.html">https://ffmpeg.org/download.html</a> 上找到预构建的.deb包（对于Ubuntu，ppa：mc3man / trusty-media PPA 提供了最新的版本）。</p>
<h4 id="flvtool2-or-flvmeta">flvtool2 or flvmeta</h4>
<p>如果要编码 FLV 视频，则必须安装 flvtool2 或 flvmeta，并且在 PATH 或 fluent-ffmpeg 中将无法生成可流式输出文件。如果您设置了 FLVTOOL2_PATH 或 FLVMETA_PATH，fluent-ffmpeg 将尝试使用它而不是在 PATH 中搜索。</p>
<h4 id="setting-binary-paths-manually">Setting binary paths manually</h4>
<p>另外，您可以使用以下 API 命令手动设置 ffmpeg，ffprobe 和 flvtool2 / flvmeta 二进制路径：</p>
<ul>
<li>**Ffmpeg.setFfmpegPath(path)**参数路径是具有 ffmpeg 二进制文件完整路径的字符串。</li>
<li>**Ffmpeg.setFfprobePath(path)**参数路径是具有 ffprobe 二进制文件完整路径的字符串。</li>
<li>**Ffmpeg.setFlvtoolPath(path)**参数路径是具有 flvtool2 或 flvmeta 二进制文件的完整路径的字符串。</li>
</ul>
<h3 id="creating-an-ffmpeg-command">Creating an FFmpeg command</h3>
<p>fluent-ffmpeg 模块返回可用于实例化 FFmpeg 命令的构造函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">FfmpegCommand</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fluent-ffmpeg&#39;</span>)
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FfmpegCommand</span>()
</code></pre></div><p>您也可以不使用 new 运算符而使用构造函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ffmpeg</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fluent-ffmpeg&#39;</span>)
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>()
</code></pre></div><p>您可以将输入文件名或可读流，配置对象或两者都传递给构造函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">createReadStream</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>));
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>({ <span style="color:#a6e22e">option</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;value&#34;</span>, ... });
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>, { <span style="color:#a6e22e">option</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;value&#34;</span>, ... });
</code></pre></div><p>提供以下选项：</p>
<ul>
<li><code>source</code>: 输入文件名或可读流（如果将输入文件传递给构造函数则忽略）</li>
<li><code>timeout</code>: ffmpeg 超时（以秒为单位）（默认为无超时）</li>
<li><code>preset</code> 或 <code>presets</code>: 用于从中加载模块预设的目录（默认为 fluent-ffmpeg 树中的 lib / presets 目录）</li>
<li><code>niceness</code> 或 <code>priority</code>: ffmpeg 优美度值，介于-20 和 20 之间；在 Windows 平台上被忽略（默认为 0）</li>
<li><code>logger</code>: 带有 debug()，info()，warn()和 error()方法的记录器对象（默认为不记录）</li>
<li><code>stdoutLines</code>: ffmpeg stdout / stderr 在内存中保留的最大行数（默认为 100，使用 0 表示无限存储）</li>
</ul>
<h3 id="specifying-inputs">Specifying inputs</h3>
<p>您可以向 Ffmpeg 命令添加任意数量的输入。输入可以是：</p>
<ul>
<li>文件名（例如/path/to/file.avi）；</li>
<li>图像正则表达式（例如/path/to/frame%03d.png）；</li>
<li>可读流;一个命令只能使用一个输入流，但是您可以同时使用一个输入流和一个或多个文件名。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// Note that all fluent-ffmpeg methods are chainable
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/input1.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/input2.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">createReadStream</span>(<span style="color:#e6db74">&#39;/path/to/input3.avi&#39;</span>))

<span style="color:#75715e">// Passing an input to the constructor is the same as calling .input()
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>()
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/input1.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/input2.avi&#39;</span>)

<span style="color:#75715e">// Most methods have several aliases, here you may use addInput or mergeAdd instead
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>()
  .<span style="color:#a6e22e">addInput</span>(<span style="color:#e6db74">&#39;/path/to/frame%02d.png&#39;</span>)
  .<span style="color:#a6e22e">addInput</span>(<span style="color:#e6db74">&#39;/path/to/soundtrack.mp3&#39;</span>)

<span style="color:#a6e22e">ffmpeg</span>()
  .<span style="color:#a6e22e">mergeAdd</span>(<span style="color:#e6db74">&#39;/path/to/input1.avi&#39;</span>)
  .<span style="color:#a6e22e">mergeAdd</span>(<span style="color:#e6db74">&#39;/path/to/input2.avi&#39;</span>)
</code></pre></div><h3 id="input-options">Input options</h3>
<p>以下方法可以将与输入有关的设置传递给 ffmpeg。这些方法中的每一个都适用于最后添加的输入（包括传递给构造函数的输入，如果有的话）。您必须在调用这些设置之前添加输入，否则将引发错误。</p>
<h4 id="inputformatformat-指定输入格式">inputFormat(format): 指定输入格式</h4>
<p><strong>Aliases</strong>: <code>fromFormat()</code>, <code>withInputFormat()</code>
这仅对原始输入有用，因为 ffmpeg 可以自动确定输入格式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>()
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/dev/video0&#39;</span>)
  .<span style="color:#a6e22e">inputFormat</span>(<span style="color:#e6db74">&#39;mov&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">inputFormat</span>(<span style="color:#e6db74">&#39;avi&#39;</span>)
</code></pre></div><p>Fluent-ffmpeg 在实际运行命令之前检查格式是否可用，并在指定的输入格式不可用时引发错误。</p>
<h4 id="inputfpsfps-指定输入帧率">inputFPS(fps): 指定输入帧率</h4>
<p><strong>Aliases</strong>: <code>withInputFps()</code>, <code>withInputFPS()</code>, <code>withFpsInput()</code>, <code>withFPSInput()</code>, <code>inputFps()</code>, <code>fpsInput()</code>, <code>FPSInput()</code>
这仅对原始输入有效，因为 ffmpeg 可以自动确定输入帧率。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/dev/video0&#39;</span>).<span style="color:#a6e22e">inputFPS</span>(<span style="color:#ae81ff">29.7</span>)
</code></pre></div><h4 id="native-以本地帧速率读取输入">native(): 以本地帧速率读取输入</h4>
<p><strong>Aliases</strong>: <code>nativeFramerate()</code>, <code>withNativeFramerate()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#66d9ef">native</span>()
</code></pre></div><h4 id="seekinputtime-设置输入开始时间">seekInput(time): 设置输入开始时间</h4>
<p><strong>Alias</strong>: <code>setStartTime()</code>
寻求输入，仅在给定的时间偏移开始解码。 time 参数可以是数字（以秒为单位）或时间戳字符串（格式为[[hh:]mm:]ss[.xxx]）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">seekInput</span>(<span style="color:#ae81ff">134.5</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">seekInput</span>(<span style="color:#e6db74">&#39;2:14.500&#39;</span>)
</code></pre></div><h4 id="loopduration-循环输入">loop([duration]): 循环输入</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">loop</span>()
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">loop</span>(<span style="color:#ae81ff">134.5</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">loop</span>(<span style="color:#e6db74">&#39;2:14.500&#39;</span>)
</code></pre></div><h4 id="inputoptionsoption-添加自定义输入选项">inputOptions(option&hellip;): 添加自定义输入选项</h4>
<p><strong>Aliases</strong>: <code>inputOption()</code>, <code>addInputOption()</code>, <code>addInputOptions()</code>, <code>withInputOption()</code>, <code>withInputOptions()</code>
此方法允许将任何与输入有关的选项传递给 ffmpeg。您可以使用单个参数来调用它以传递单个选项，还可以选择使用空格分隔的参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">/* Single option */</span>
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">inputOptions</span>(<span style="color:#e6db74">&#39;-someOption&#39;</span>)

<span style="color:#75715e">/* Single option with parameter */</span>
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/dev/video0&#39;</span>).<span style="color:#a6e22e">inputOptions</span>(<span style="color:#e6db74">&#39;-r 24&#39;</span>)
</code></pre></div><p>您也可以通过将数组传递给方法来一次传递多个选项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">inputOptions</span>([
  <span style="color:#e6db74">&#39;-option1&#39;</span>,
  <span style="color:#e6db74">&#39;-option2 param2&#39;</span>,
  <span style="color:#e6db74">&#39;-option3&#39;</span>,
  <span style="color:#e6db74">&#39;-option4 param4&#39;</span>
])
</code></pre></div><p>最后，您还可以直接将命令行标记作为单独的参数传递给方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">inputOptions</span>(
  <span style="color:#e6db74">&#39;-option1&#39;</span>,
  <span style="color:#e6db74">&#39;-option2&#39;</span>,
  <span style="color:#e6db74">&#39;param2&#39;</span>,
  <span style="color:#e6db74">&#39;-option3&#39;</span>,
  <span style="color:#e6db74">&#39;-option4&#39;</span>,
  <span style="color:#e6db74">&#39;param4&#39;</span>
)
</code></pre></div><h3 id="audio-options">Audio options</h3>
<p>下列方法更改产生的输出中的音频流。</p>
<h4 id="noaudio-完全禁用音频">noAudio(): 完全禁用音频</h4>
<p><strong>Aliases</strong>: <code>withNoAudio()</code>
禁用输出中的音频，并删除任何以前设置的音频选项。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">noAudio</span>()
</code></pre></div><h4 id="audiocodeccodec-设置音频编解码器">audioCodec(codec): 设置音频编解码器</h4>
<p><strong>Aliases</strong>: <code>withAudioCodec()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
</code></pre></div><p>Fluent-ffmpeg 在实际运行命令之前检查编解码器是否可用，并在指定的音频编解码器不可用时引发错误。</p>
<h4 id="audiobitratebitrate-设置音频比特率">audioBitrate(bitrate): 设置音频比特率</h4>
<p><strong>Aliases</strong>: <code>withAudioBitrate()</code>
以 kbps 设置音频比特率。 <code>bitrate</code>参数可以是数字或带可选 k 后缀的字符串。此方法用于强制执行恒定的比特率。使用<code>audioQuality()</code>使用可变比特率进行编码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">audioBitrate</span>(<span style="color:#ae81ff">128</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">audioBitrate</span>(<span style="color:#e6db74">&#39;128&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">audioBitrate</span>(<span style="color:#e6db74">&#39;128k&#39;</span>)
</code></pre></div><h4 id="audiochannelscount-设置音频通道数">audioChannels(count): 设置音频通道数</h4>
<p><strong>Aliases</strong>: <code>withAudioChannels()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">audioChannels</span>(<span style="color:#ae81ff">2</span>)
</code></pre></div><h4 id="audiofrequencyfreq-设置音频频率">audioFrequency(freq): 设置音频频率</h4>
<p><strong>Aliases</strong>: <code>withAudioFrequency()</code>
freq 参数指定以 Hz 为单位的音频频率</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">audioFrequency</span>(<span style="color:#ae81ff">22050</span>)
</code></pre></div><h4 id="audioqualityquality-设置音频质量">audioQuality(quality): 设置音频质量</h4>
<p><strong>Aliases</strong>: <code>withAudioQuality()</code>
此方法固定音频编解码器（VBR 编码）的质量因数。质量等级取决于实际使用的编解码器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
  .<span style="color:#a6e22e">audioQuality</span>(<span style="color:#ae81ff">0</span>)
</code></pre></div><h4 id="audiofiltersfilter-添加自定义音频过滤器">audioFilters(filter&hellip;): 添加自定义音频过滤器</h4>
<p><strong>Aliases</strong>: <code>audioFilter()</code>, <code>withAudioFilter()</code>, <code>withAudioFilters()</code>
此方法可以添加自定义音频过滤器。您可以通过传递多个参数或数组来一次添加多个过滤器。有关可用的过滤器及其语法，请参见 Ffmpeg 文档。
传到此方法的每个过滤器可以是过滤器字符串（例如，volume=0.5）或具有以下键的过滤器规范对象：</p>
<ul>
<li>filter: 过滤器名称</li>
<li>options: 可选的;过滤器的选项字符串（例如 n=-50dB:d=5），未命名选项的选项数组(eg. ['-50dB', 5])或对象将选项名称映射到值(eg. { n: &lsquo;-50dB&rsquo;, d: 5 })。未指定<code>options</code>时，将添加不带任何设置的过滤器。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">audioFilters</span>(<span style="color:#e6db74">&#39;volume=0.5&#39;</span>)
  .<span style="color:#a6e22e">audioFilters</span>(<span style="color:#e6db74">&#39;silencedetect=n=-50dB:d=5&#39;</span>);

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">audioFilters</span>(<span style="color:#e6db74">&#39;volume=0.5&#39;</span>, <span style="color:#e6db74">&#39;silencedetect=n=-50dB:d=5&#39;</span>);

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">audioFilters</span>([<span style="color:#e6db74">&#39;volume=0.5&#39;</span>, <span style="color:#e6db74">&#39;silencedetect=n=-50dB:d=5&#39;</span>]);

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">audioFilters</span>([
    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;volume&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;0.5&#39;</span>
    },
    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;silencedetect&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;n=-50dB:d=5&#39;</span>
    }
  ]);

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">audioFilters</span>(
    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;volume&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;0.5&#39;</span>]
    },
    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;silencedetect&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">n</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;-50dB&#39;</span>, <span style="color:#a6e22e">d</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span> }
    }
  ]);
</code></pre></div><h3 id="video-options">Video options</h3>
<p>下列方法更改产生的输出中的视频流。</p>
<h4 id="novideo-完全禁用视频">noVideo(): 完全禁用视频</h4>
<p><strong>Aliases</strong>: <code>withNoVideo()</code>
此方法禁用视频输出，并删除任何以前设置的视频选项。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">noVideo</span>()
</code></pre></div><h4 id="videocodeccodec-设置视频编解码器">videoCodec(codec): 设置视频编解码器</h4>
<p><strong>Aliases</strong>: <code>withVideoCodec()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
</code></pre></div><p>Fluent-ffmpeg 在实际运行命令之前检查编解码器的可用性，并在指定的视频编解码器不可用时引发错误。</p>
<h4 id="videobitratebitrate-constantfalse-设置视频比特率">videoBitrate(bitrate[, constant=false]): 设置视频比特率</h4>
<p><strong>Aliases</strong>: <code>withVideoBitrate()</code>
设置目标视频比特率（以 kbps 为单位）。 <code>bitrate</code>参数可以是数字或带可选<code>k</code>后缀的字符串。 <code>constant</code>参数指定是否应实施恒定比特率（默认为<code>false</code>）。
请记住，根据所使用的编解码器，强制采用恒定比特率通常会牺牲质量。保持恒定视频比特率而不损失太多质量的最佳方法是使用 2-pass 编码（请参阅 Fffmpeg 文档）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoBitrate</span>(<span style="color:#ae81ff">1000</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoBitrate</span>(<span style="color:#e6db74">&#39;1000&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoBitrate</span>(<span style="color:#e6db74">&#39;1000k&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoBitrate</span>(<span style="color:#e6db74">&#39;1000k&#39;</span>, <span style="color:#66d9ef">true</span>)
</code></pre></div><h4 id="videofiltersfilter-添加自定义视频过滤器">videoFilters(filter&hellip;): 添加自定义视频过滤器</h4>
<p><strong>Aliases</strong>: <code>videoFilter()</code>, <code>withVideoFilter()</code>, <code>withVideoFilters()</code>
此方法可以添加自定义视频过滤器。您可以通过传递多个参数或数组来一次添加多个过滤器。有关可用的过滤器及其语法，请参见 Ffmpeg 文档。
传到此方法的每个过滤器可以是过滤器字符串（例如，volume=0.5）或具有以下键的过滤器规范对象：</p>
<ul>
<li>filter: 过滤器名称</li>
<li>options: 可选的;过滤器的选项字符串 (eg. in:0:30)，未命名选项的选项数组 (eg. [&lsquo;in&rsquo;, 0, 30])或对象将选项名称映射到值(eg. { t: &lsquo;in&rsquo;, s: 0, n: 30 })。未指定<code>options</code>时，将添加不带任何选项的过滤器。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">videoFilters</span>(<span style="color:#e6db74">&#39;fade=in:0:30&#39;</span>)
  .<span style="color:#a6e22e">videoFilters</span>(<span style="color:#e6db74">&#39;pad=640:480:0:40:violet&#39;</span>)

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoFilters</span>(
  <span style="color:#e6db74">&#39;fade=in:0:30&#39;</span>,
  <span style="color:#e6db74">&#39;pad=640:480:0:40:violet&#39;</span>
)

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoFilters</span>([
  <span style="color:#e6db74">&#39;fade=in:0:30&#39;</span>,
  <span style="color:#e6db74">&#39;pad=640:480:0:40:violet&#39;</span>
])

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoFilters</span>([
  {
    <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;fade&#39;</span>,
    <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;in:0:30&#39;</span>
  },
  {
    <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pad&#39;</span>,
    <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;640:480:0:40:violet&#39;</span>
  }
])

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">videoFilters</span>(
  {
    <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;fade&#39;</span>,
    <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;in&#39;</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">30</span>]
  },
  {
    <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;filter2&#39;</span>,
    <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">w</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">640</span>, <span style="color:#a6e22e">h</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">480</span>, <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">40</span>, <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;violet&#39;</span> }
  }
)
</code></pre></div><h4 id="fpsfps-设置输出帧率">fps(fps): 设置输出帧率</h4>
<p><strong>Aliases</strong>: <code>withOutputFps()</code>, <code>withOutputFPS()</code>, <code>withFpsOutput()</code>, <code>withFPSOutput()</code>, <code>withFps()</code>, <code>withFPS()</code>, <code>outputFPS()</code>, <code>outputFps()</code>, <code>fpsOutput()</code>, <code>FPSOutput()</code>, <code>FPS()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">fps</span>(<span style="color:#ae81ff">29.7</span>)
</code></pre></div><p>frames(count): 指定帧数
<strong>Aliases</strong>: <code>takeFrames()</code>, <code>withFrames()</code>
将 ffmpeg 设置为仅编码一定数量的帧。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">frames</span>(<span style="color:#ae81ff">240</span>)
</code></pre></div><h3 id="视频帧尺寸-options">视频帧尺寸 options</h3>
<p>通过以下方法可以调整输出视频帧大小的尺寸。它们一起工作以生成适当的视频过滤器</p>
<h4 id="sizesize-设置输出帧大小">size(size): 设置输出帧大小</h4>
<p><strong>Aliases</strong>: <code>videoSize()</code>, <code>withSize()</code>
此方法设置输出帧的大小。 <code>size</code>参数可能具有以下格式之一：</p>
<ul>
<li><code>640x480</code>: 设置固定的输出帧大小。除非调用<code>autopad()</code>，否则可能会导致视频被拉伸或压缩以适合请求的大小。</li>
<li><code>640x?</code>: 设置固定宽度并自动计算高度。如果<code>aspect()</code>也被调用，则用于计算视频高度；否则进行计算，以便保留输入的宽高比。</li>
<li><code>?x480</code>: 设置一个固定的高度并自动计算宽度。如果<code>aspect()</code>也被调用，则用于计算视频宽度；否则进行计算，以便保留输入的宽高比。</li>
<li><code>50%</code>: 将宽度和高度都缩放到给定的百分比。纵横比始终保持不变</li>
</ul>
<p>请注意，为了与某些编解码器兼容，计算尺寸总是四舍五入为 2 的倍数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;50%&#39;</span>)
</code></pre></div><h4 id="aspectaspect-设置输出帧的宽高比">aspect(aspect): 设置输出帧的宽高比</h4>
<p><strong>Aliases</strong>: <code>withAspect()</code>, <code>withAspectRatio()</code>, <code>setAspect()</code>, <code>setAspectRatio()</code>, <code>aspectRatio()</code>
此方法强制执行特定的输出宽高比。 <code>aspect</code>参数可以是数字或<code>X：Y</code>字符串。
请注意，当以固定的宽度和高度或百分比调用<code>size()</code>时，以及根本没有调用<code>size()</code>时，将忽略对<code>aspect()</code>的调用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#ae81ff">1.33333</span>)
</code></pre></div><h4 id="autopadcolorblack-启用自动填充输出视频">autopad([color=&lsquo;black&rsquo;]): 启用自动填充输出视频</h4>
<p><strong>Aliases</strong>: <code>applyAutopadding()</code>, <code>applyAutoPadding()</code>, <code>applyAutopad()</code>, <code>applyAutoPad()</code>, <code>withAutopadding()</code>, <code>withAutoPadding()</code>, <code>withAutopad()</code>, <code>withAutoPad()</code>, <code>autoPad()</code>
此方法可以将自动填充应用于输出视频。 <code>color</code>参数指定用于填充的颜色，并且必须是 ffmpeg 支持的颜色代码或名称（默认为&rsquo;black'）。
此方法的行为取决于对其他视频尺寸方法的调用：</p>
<ul>
<li>当<code>size()</code>已被调用或未调用时，将被忽略；</li>
<li>当用 <code>WxH</code> 调用 <code>size()</code> 时，它会添加填充以保持输入的长宽比；</li>
<li>当用任一<code>Wx?</code>或<code>?xH</code>调用<code>size()</code>时,仅当调用<code>aspect()</code>时才添加填充（否则，将根据输入的宽高比计算输出尺寸，而无需填充）。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// No size specified, autopad() is ignored
</span><span style="color:#75715e">// 当`size()`已被调用或未调用时，将被忽略；
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">autopad</span>()

<span style="color:#75715e">// 添加填充以保持原始宽高比。
</span><span style="color:#75715e">// - with a 640x400 input, 40 pixels of padding are added on both sides
</span><span style="color:#75715e">// - with a 600x480 input, 20 pixels of padding are added on top and bottom
</span><span style="color:#75715e">// - with a 320x200 input, video is scaled up to 640x400 and 40px of padding
</span><span style="color:#75715e">//   is added on both sides
</span><span style="color:#75715e">// - with a 320x240 input, video is scaled up to 640x480 and and no padding
</span><span style="color:#75715e">//   is needed
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>()
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#e6db74">&#39;white&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#e6db74">&#39;#35A5FF&#39;</span>)

<span style="color:#75715e">// Size computed from input, autopad() is ignored
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;50%&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>()
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>()
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;?x480&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>()

<span style="color:#75715e">// 调用 .size(&#39;640x?&#39;).aspect(&#39;4:3&#39;) 类似于调用 .size(&#39;640x480&#39;)
</span><span style="color:#75715e">// - 输入为640x400时，两侧均添加40像素的填充
</span><span style="color:#75715e">// - with a 600x480 input, 20 pixels of padding are added on top and bottom
</span><span style="color:#75715e">// - with a 320x200 input, video is scaled up to 640x400 and 40px of padding
</span><span style="color:#75715e">//   is added on both sides
</span><span style="color:#75715e">// - with a 320x240 input, video is scaled up to 640x480 and and no padding
</span><span style="color:#75715e">//   is needed
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>()
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#e6db74">&#39;white&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x?&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#e6db74">&#39;#35A5FF&#39;</span>)

<span style="color:#75715e">// Calling .size(&#39;?x480&#39;).aspect(&#39;4:3&#39;) is similar to calling .size(&#39;640x480&#39;)
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;?x480&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>()
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;?x480&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#e6db74">&#39;white&#39;</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;?x480&#39;</span>)
  .<span style="color:#a6e22e">aspect</span>(<span style="color:#e6db74">&#39;4:3&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#e6db74">&#39;#35A5FF&#39;</span>)
</code></pre></div><p>为了与以前的 fluent-ffmpeg 版本兼容，此方法还接受一个附加的布尔第一参数，该参数指定是否应用自动填充。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#66d9ef">true</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)
  .<span style="color:#a6e22e">autopad</span>(<span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#39;pink&#39;</span>)
</code></pre></div><h4 id="keepdar-保持显示纵横比">keepDAR(): 保持显示纵横比</h4>
<p><strong>Aliases</strong>: <code>keepPixelAspect()</code>, <code>keepDisplayAspect()</code>, <code>keepDisplayAspectRatio()</code>
当将具有非正方形像素的输入转换为不支持非正方形像素的输出格式（例如，大多数图像格式）时，此方法很有用。它会重新缩放输入，以使显示宽高比相同。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">keepDAR</span>()
</code></pre></div><h3 id="specifying-multiple-outputs">Specifying multiple outputs</h3>
<h4 id="outputtarget-options-将输出添加到命令">output(target[, options]): 将输出添加到命令</h4>
<p><strong>Aliases</strong>: <code>addOutput()</code>
将输出添加到命令。<code>target</code> 参数可以是输出文件名或可写流（但单个命令最多可以使用一个输出流）。</p>
<p>当<code>target</code>是流时，可以传递其他<code>options</code>对象。如果存在，它将通过 ffmpeg 输出流<code>pipe()</code>方法传递。</p>
<p>添加输出将切换命令的“当前输出”，以便将应用于该输出的任何 fluent-ffmpeg 方法确实应用于最后添加的输出。出于向后兼容的原因，您最好在添加第一个输出之前调用这些方法（在这种情况下，它们将在添加第一个输出时应用于第一个输出）。适用于输出的方法是所有与输入无关的方法，但<code>complexFilter()</code>是全局的。</p>
<p>还要注意，在调用<code>output()</code>时，不应使用<code>save()</code>或<code>stream()</code>（以前称为 saveToFile（）和 writeToStream（））方法，因为它们已经添加了输出。使用<code>run()</code>方法开始处理。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stream</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">createWriteStream</span>(<span style="color:#e6db74">&#39;outputfile.divx&#39;</span>)

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;outputfile.mp4&#39;</span>)
  .<span style="color:#a6e22e">output</span>(<span style="color:#a6e22e">stream</span>)

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  <span style="color:#75715e">// You may pass a pipe() options object when using a stream
</span><span style="color:#75715e"></span>  .<span style="color:#a6e22e">output</span>(<span style="color:#a6e22e">stream</span>, { <span style="color:#a6e22e">end</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span> })

<span style="color:#75715e">// Output-related methods apply to the last output added
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;outputfile.mp4&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libfaac&#39;</span>)
  .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;320x200&#39;</span>)

  .<span style="color:#a6e22e">output</span>(<span style="color:#a6e22e">stream</span>)
  .<span style="color:#a6e22e">preset</span>(<span style="color:#e6db74">&#39;divx&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)

<span style="color:#75715e">// Use the run() method to run commands with multiple outputs
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;outputfile.mp4&#39;</span>)
  .<span style="color:#a6e22e">output</span>(<span style="color:#a6e22e">stream</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Finished processing&#39;</span>)
  })
  .<span style="color:#a6e22e">run</span>()
</code></pre></div><h3 id="output-options">Output options</h3>
<h4 id="durationtime-设置输出持续时间">duration(time): 设置输出持续时间</h4>
<p><strong>Aliases</strong>: <code>withDuration()</code>, <code>setDuration()</code>
强制 ffmpeg 在特定的输出持续时间后停止转码。 time 参数可以是数字（以秒为单位）或时间戳字符串（格式为[[hh:]mm:]ss[.xxx]）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">duration</span>(<span style="color:#ae81ff">134.5</span>)
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">duration</span>(<span style="color:#e6db74">&#39;2:14.500&#39;</span>)
</code></pre></div><h4 id="seektime-搜寻输出">seek(time): 搜寻输出</h4>
<p><strong>Aliases</strong>: <code>seekOutput()</code>
在将流编码到输出之前先查找流。这与调用<code>seekInput()</code>不同，因为偏移量仅适用于一个输出。这也较慢，因为跳过的帧仍将被解码（但丢弃）。
time 参数可以是数字（以秒为单位）或时间戳字符串（格式为[[hh:]mm:]ss[.xxx]）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">seekInput</span>(<span style="color:#e6db74">&#39;1:00&#39;</span>)

  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;from-1m30s.avi&#39;</span>)
  .<span style="color:#a6e22e">seek</span>(<span style="color:#ae81ff">30</span>)

  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;from-1m40s.avi&#39;</span>)
  .<span style="color:#a6e22e">seek</span>(<span style="color:#e6db74">&#39;0:40&#39;</span>)
</code></pre></div><h4 id="formatformat-设置输出格式">format(format): 设置输出格式</h4>
<p><strong>Aliases</strong>: <code>withOutputFormat()</code>, <code>toFormat()</code>, <code>outputFormat()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#39;flv&#39;</span>)
</code></pre></div><h4 id="flvmeta-转码后更新-flv-元数据">flvmeta(): 转码后更新 FLV 元数据</h4>
<p><strong>Aliases</strong>: <code>updateFlvMetadata()</code>
调用此方法可使 fluent-ffmpeg 在输出文件上运行<code>flvmeta</code>或<code>flvtool2</code>，以添加 FLV 元数据并使文件可流式传输。当输出到流时，它不起作用，仅在输出为 FLV 格式时才有用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">flvmeta</span>()
  .<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#39;flv&#39;</span>)
</code></pre></div><h4 id="outputoptionsoption-添加自定义输出选项">outputOptions(option&hellip;): 添加自定义输出选项</h4>
<p><strong>Aliases</strong>: <code>outputOption()</code>, <code>addOutputOption()</code>, <code>addOutputOptions()</code>, <code>withOutputOption()</code>, <code>withOutputOptions()</code>, <code>addOption()</code>, <code>addOptions()</code>
此方法允许将任何与输出相关的选项传递给 ffmpeg。您可以使用单个参数来调用它以传递单个选项，还可以选择使用空格分隔的参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">/* Single option */</span>
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">outputOptions</span>(<span style="color:#e6db74">&#39;-someOption&#39;</span>)

<span style="color:#75715e">/* Single option with parameter */</span>
<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/dev/video0&#39;</span>).<span style="color:#a6e22e">outputOptions</span>(<span style="color:#e6db74">&#39;-r 24&#39;</span>)
</code></pre></div><p>您也可以通过将数组传递给方法来一次传递多个选项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">outputOptions</span>([
  <span style="color:#e6db74">&#39;-option1&#39;</span>,
  <span style="color:#e6db74">&#39;-option2 param2&#39;</span>,
  <span style="color:#e6db74">&#39;-option3&#39;</span>,
  <span style="color:#e6db74">&#39;-option4 param4&#39;</span>
])
</code></pre></div><p>最后，您还可以直接将命令行标记作为单独的参数传递给方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">outputOptions</span>(
  <span style="color:#e6db74">&#39;-option1&#39;</span>,
  <span style="color:#e6db74">&#39;-option2&#39;</span>,
  <span style="color:#e6db74">&#39;param2&#39;</span>,
  <span style="color:#e6db74">&#39;-option3&#39;</span>,
  <span style="color:#e6db74">&#39;-option4&#39;</span>,
  <span style="color:#e6db74">&#39;param4&#39;</span>
)
</code></pre></div><h3 id="miscellaneous-options">Miscellaneous options</h3>
<h4 id="presetpreset-使用-fluent-ffmpeg-预设">preset(preset): 使用 fluent-ffmpeg 预设</h4>
<p><strong>Aliases</strong>: <code>usingPreset()</code>
fluent-ffmpeg 支持两种预设。第一个是预设模块；要使用这些名称，请将预设名称作为预设参数传递。预设模块从<code>presets</code>构造函数选项指定的目录中加载（默认为<code>lib/presets</code> fluent-ffmpeg 子目录）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// Uses &lt;path-to-fluent-ffmpeg&gt;/lib/presets/divx.js
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">preset</span>(<span style="color:#e6db74">&#39;divx&#39;</span>)

<span style="color:#75715e">// Uses /my/presets/foo.js
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>, { <span style="color:#a6e22e">presets</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/my/presets&#39;</span> }).<span style="color:#a6e22e">preset</span>(<span style="color:#e6db74">&#39;foo&#39;</span>)
</code></pre></div><p>预设模块必须导出以 FfmpegCommand 作为参数的<code>load()</code>函数。 fluent-ffmpeg 预先安装了以下预设模块：</p>
<ul>
<li>divx</li>
<li>flashvideo</li>
<li>podcast
以下是包含的<code>divx</code>预设中的代码作为示例：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">exports</span>.<span style="color:#a6e22e">load</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">ffmpeg</span>) {
  <span style="color:#a6e22e">ffmpeg</span>
    .<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#39;avi&#39;</span>)
    .<span style="color:#a6e22e">videoBitrate</span>(<span style="color:#e6db74">&#39;1024k&#39;</span>)
    .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;mpeg4&#39;</span>)
    .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;720x?&#39;</span>)
    .<span style="color:#a6e22e">audioBitrate</span>(<span style="color:#e6db74">&#39;128k&#39;</span>)
    .<span style="color:#a6e22e">audioChannels</span>(<span style="color:#ae81ff">2</span>)
    .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
    .<span style="color:#a6e22e">outputOptions</span>([<span style="color:#e6db74">&#39;-vtag DIVX&#39;</span>])
}
</code></pre></div><p>第二种预设是预设函数。要使用这些函数，请传递一个以 FfmpegCommand 作为参数的函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">myPreset</span>(<span style="color:#a6e22e">command</span>) {
  <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#39;avi&#39;</span>).<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;720x?&#39;</span>)
}

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">preset</span>(<span style="color:#a6e22e">myPreset</span>)
</code></pre></div><h4 id="complexfilterfilters-map-设置复杂的-filtergraph">complexFilter(filters[, map]): 设置复杂的 filtergraph</h4>
<p><strong>Aliases</strong>: <code>filterGraph()</code>
complexFilter()方法可为命令设置复杂的过滤器图。它期望一个过滤器规范（或过滤器规范数组）和一个可选的输出映射参数作为参数。
过滤器规范可以是简单的 ffmpeg 过滤器字符串（例如 split=3[a][b][c]）或具有以下键的对象：</p>
<ul>
<li>filter: 过滤器名称</li>
<li>options: 可选的;过滤器的选项字符串 (eg. in:0:30)，未命名选项的选项数组(eg. [&lsquo;in&rsquo;, 0, 30]) 或对象将选项名称映射到值(eg. { t: &lsquo;in&rsquo;, s: 0, n: 30 })。未指定选项时，将添加不带任何选项的过滤器。</li>
<li>inputs: 可选的;过滤器的输入流说明符。该值可以是单个流说明符字符串，也可以是流说明符数组。每个说明符都可以选择包含在方括号中。如果未指定输入流，则 ffmpeg 将使用正确类型的第一个未使用的流。</li>
<li>outputs: 可选的;过滤器的输出流说明符。该值可以是单个流说明符字符串，也可以是流说明符数组。每个说明符都可以选择包含在方括号中。</li>
</ul>
<p>输出映射参数指定要在过滤器图的输出中包括哪些流。它可以是单个流说明符字符串，也可以是流说明符数组。每个说明符都可以选择包含在方括号中。如果不存在此参数，则 ffmpeg 将默认将所有未使用的输出保存到输出文件。</p>
<p>注意，在给定命令上只能设置一个复杂的过滤图。再次调用 complexFilter（）将覆盖以前设置的任何过滤器图形，但是您可以在单个调用中根据需要设置任意多个过滤器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">complexFilter</span>(
  [
    <span style="color:#75715e">// Rescale input stream into stream &#39;rescaled&#39;
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#39;scale=640:480[rescaled]&#39;</span>,

    <span style="color:#75715e">// Duplicate rescaled stream 3 times into streams a, b, and c
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;split&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;3&#39;</span>,
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;rescaled&#39;</span>,
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>]
    },

    <span style="color:#75715e">// Create stream &#39;red&#39; by removing green and blue channels from stream &#39;a&#39;
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lutrgb&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">g</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> },
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;a&#39;</span>,
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;red&#39;</span>
    },

    <span style="color:#75715e">// Create stream &#39;green&#39; by removing red and blue channels from stream &#39;b&#39;
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lutrgb&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">r</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> },
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;b&#39;</span>,
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;green&#39;</span>
    },

    <span style="color:#75715e">// Create stream &#39;blue&#39; by removing red and green channels from stream &#39;c&#39;
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lutrgb&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">r</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">g</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> },
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;c&#39;</span>,
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;blue&#39;</span>
    },

    <span style="color:#75715e">// Pad stream &#39;red&#39; to 3x width, keeping the video on the left,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// and name output &#39;padded&#39;
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pad&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">w</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;iw*3&#39;</span>, <span style="color:#a6e22e">h</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;ih&#39;</span> },
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;red&#39;</span>,
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;padded&#39;</span>
    },

    <span style="color:#75715e">// Overlay &#39;green&#39; onto &#39;padded&#39;, moving it to the center,
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// and name output &#39;redgreen&#39;
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;overlay&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;w&#39;</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> },
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;padded&#39;</span>, <span style="color:#e6db74">&#39;green&#39;</span>],
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;redgreen&#39;</span>
    },

    <span style="color:#75715e">// Overlay &#39;blue&#39; onto &#39;redgreen&#39;, moving it to the right
</span><span style="color:#75715e"></span>    {
      <span style="color:#a6e22e">filter</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;overlay&#39;</span>,
      <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;2*w&#39;</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> },
      <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;redgreen&#39;</span>, <span style="color:#e6db74">&#39;blue&#39;</span>],
      <span style="color:#a6e22e">outputs</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;output&#39;</span>
    }
  ],
  <span style="color:#e6db74">&#39;output&#39;</span>
)
</code></pre></div><h3 id="setting-event-handlers">Setting event handlers</h3>
<p>在实际运行命令之前，您可能希望在其上设置事件侦听器，以在完成操作时得到通知。以下事件可用：</p>
<h4 id="start-ffmpeg-进程开始">&lsquo;start&rsquo;: ffmpeg 进程开始</h4>
<p>生成 ffmpeg 之后立即发出 start 事件。它以完整的命令行作为参数发出。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;start&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">commandLine</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Spawned Ffmpeg with command: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">commandLine</span>)
})
</code></pre></div><h4 id="codecdata-输入编解码器数据可用">&lsquo;codecData&rsquo;: 输入编解码器数据可用</h4>
<p>当 ffmpeg 输出有关其输入流的编解码器信息时，将发出 codecData 事件。它与带有以下键的 object 参数一起发出：</p>
<ul>
<li>format: 输入格式</li>
<li>duration: 输入时间</li>
<li>audio: 音频编解码器</li>
<li>audio_details: 音频编码详细信息</li>
<li>video: 视频编解码器</li>
<li>video_details: 视频编码详细信息</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;codecData&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(
    <span style="color:#e6db74">&#39;Input is &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">audio</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; audio &#39;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;with &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">video</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; video&#39;</span>
  )
})
</code></pre></div><h4 id="progress-转码进度信息">&lsquo;progress&rsquo;: 转码进度信息</h4>
<p>每当 ffmpeg 报告进度信息时，都会发出进度事件。它与带有以下键的 object 参数一起发出：</p>
<ul>
<li>frames: 已处理的总帧数</li>
<li>currentFps: FFmpeg 当前正在处理的帧速率</li>
<li>currentKbps: FFmpeg 当前正在处理的吞吐量</li>
<li>targetSize: 目标文件的当前大小（以千字节为单位）</li>
<li>timemark: 当前帧的时间戳（以秒为单位）</li>
<li>percent: 进度百分比的估计</li>
</ul>
<p>请注意，<code>percent</code>可能（非常）不准确，因为 fluent-ffmpeg 从 ffmpeg 获得的唯一进度信息是写入的帧总数（以及相应的持续时间）。要估算百分比，fluent-ffmpeg 必须猜测总输出持续时间是多少，并使用添加到命令中的第一个输入来执行此操作。特别是：</p>
<ul>
<li>使用输入流时百分比不可用</li>
<li>当使用多个具有不同持续时间的输入时，百分比可能是错误的，并且第一个不是最长的</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;progress&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">progress</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Processing: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">progress</span>.<span style="color:#a6e22e">percent</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;% done&#39;</span>)
})
</code></pre></div><h4 id="stderr-ffmpeg-输出">&lsquo;stderr&rsquo;: FFmpeg 输出</h4>
<p>每次 FFmpeg 向<code>stderr</code>输出一条线时，都会发出<code>stderr</code>事件。它与包含 stderr 的行的字符串一起发出（减去结尾的换行符）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;stderr&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">stderrLine</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Stderr output: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">stderrLine</span>)
})
</code></pre></div><h4 id="error-转码错误">&lsquo;error&rsquo;: 转码错误</h4>
<p>运行 ffmpeg 或准备执行 ffmpeg 时发生错误时，会发出<code>error</code>事件。它以错误对象作为参数发出。如果在 ffmpeg 执行过程中发生了错误，侦听器还将收到另外两个包含 ffmpegs stdout 和 stderr 的参数。
如果将流用于输入或输出，则从这些流发出的任何错误都将传递到此事件，并分别作为输入和输出流的<code>inputStreamError</code>和<code>outputStreamError</code>附加到该<code>error</code>。
<strong>警告</strong>：您应该始终为错误事件设置处理程序，因为在发出没有任何侦听器的错误事件时，节点的默认行为是将错误输出到控制台并终止程序。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">stdout</span>, <span style="color:#a6e22e">stderr</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Cannot process video: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
})
</code></pre></div><h4 id="end-处理完成">&lsquo;end&rsquo;: 处理完成</h4>
<p>处理完成后，发出结束事件。侦听器接收 ffmpeg 标准输出和标准错误作为参数，但生成缩略图时除外（请参见下文），在这种情况下，侦听器将接收生成的文件名数组。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">stdout</span>, <span style="color:#a6e22e">stderr</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Transcoding succeeded !&#39;</span>)
})
</code></pre></div><p>命令输出到流时，<code>stdout</code>为空。 <code>stdout</code>和<code>stderr</code>都受<code>stdoutLines</code>选项限制（默认为 100 行）。</p>
<h3 id="starting-ffmpeg-processing">Starting FFmpeg processing</h3>
<h4 id="savefilename-将输出保存到文件">save(filename): 将输出保存到文件</h4>
<p><strong>Aliases</strong>: <code>saveToFile()</code>
开始 ffmpeg 处理并将输出保存到文件中。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;320x240&#39;</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;An error occurred: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
  })
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Processing finished !&#39;</span>)
  })
  .<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;/path/to/output.mp4&#39;</span>)
</code></pre></div><p>注意：<code>save()</code>方法实际上是用于调用<code>output()</code>和<code>run()</code>的语法糖。</p>
<h4 id="pipestream-options-将输出通过管道传输到可写流">pipe([stream], [options]): 将输出通过管道传输到可写流</h4>
<p><strong>Aliases</strong>: <code>stream()</code>, <code>writeToStream()</code>
开始处理并将 ffmpeg 输出传送到可写流。如果存在 options 参数，则将其传递给 ffmpeg 输出流的 pipe（）方法（请参阅 nodejs 文档）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">outStream</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">createWriteStream</span>(<span style="color:#e6db74">&#39;/path/to/output.mp4&#39;</span>)

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;320x240&#39;</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;An error occurred: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
  })
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Processing finished !&#39;</span>)
  })
  .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">outStream</span>, { <span style="color:#a6e22e">end</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span> })
</code></pre></div><p>当不存在任何流参数时，<code>pipe()</code>方法将返回 PassThrough 流，您可以将该流传递到其他位置（或仅监听事件）。
注意：这仅在 node &gt;= 0.10 时可用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;320x240&#39;</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;An error occurred: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
  })
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Processing finished !&#39;</span>)
  })

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ffstream</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">pipe</span>()
<span style="color:#a6e22e">ffstream</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;data&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">chunk</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;ffmpeg just wrote &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">chunk</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; bytes&#39;</span>)
})
</code></pre></div><h4 id="run-开始处理">run(): 开始处理</h4>
<p><strong>Aliases</strong>: <code>exec()</code>, <code>execute()</code>
当产生多个输出时，此方法主要有用（否则，save()或 stream()方法更简单）。它开始处理指定的输出。
<strong>警告</strong>：在调用其他处理方法（例如 save()，pipe()或 screenshots()）时，请勿使用 run()。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;screenshot.png&#39;</span>)
  .<span style="color:#a6e22e">noAudio</span>()
  .<span style="color:#a6e22e">seek</span>(<span style="color:#e6db74">&#39;3:00&#39;</span>)

  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;small.avi&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;copy&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;320x200&#39;</span>)

  .<span style="color:#a6e22e">output</span>(<span style="color:#e6db74">&#39;big.avi&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;copy&#39;</span>)
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x480&#39;</span>)

  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;An error occurred: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
  })
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Processing finished !&#39;</span>)
  })
  .<span style="color:#a6e22e">run</span>()
</code></pre></div><h4 id="mergetofilefilename-tmpdir-连接多个输入">mergeToFile(filename, tmpdir): 连接多个输入</h4>
<p>在命令上使用 input 和 mergeToFile 方法将多个输入连接到单个输出文件。 mergeToFile 需要一个临时文件夹作为第二个参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/part1.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/part2.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/part2.avi&#39;</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;An error occurred: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
  })
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Merging finished !&#39;</span>)
  })
  .<span style="color:#a6e22e">mergeToFile</span>(<span style="color:#e6db74">&#39;/path/to/merged.avi&#39;</span>, <span style="color:#e6db74">&#39;/path/to/tempDir&#39;</span>)
</code></pre></div><h4 id="screenshotsoptions-dirname-产生缩图">screenshots(options[, dirname]): 产生缩图</h4>
<p><strong>Aliases</strong>: <code>thumbnail()</code>, <code>thumbnails()</code>, <code>screenshot()</code>, <code>takeScreenshots()</code>
使用<code>screenshots</code>方法提取一个或多个缩略图，并将其另存为 PNG 文件。但是，此实现有一些注意事项：</p>
<ul>
<li>在输入流上不起作用</li>
<li>进度事件报告的进度信息不准确</li>
<li>它与过滤器的交互效果不佳。特别是，不要使用 size() 方法来调整缩略图的大小，而应使用 size option 代替。</li>
</ul>
<p>options 参数是具有以下键的对象：</p>
<ul>
<li><code>folder</code>: 生成图像文件的输出文件夹。默认为当前文件夹。</li>
<li><code>filename</code>: 输出文件名模式（请参见下文）。默认为“tn.png”。</li>
<li><code>count</code>: 指定要生成多少个缩略图。使用此选项时，视频中会定期生成缩略图（例如，当请求 3 个缩略图时，分别为视频长度的 25％，50％和 75％）。指定时间戳或时间戳时，将忽略 count。</li>
<li><code>timemarks</code> or <code>timestamps</code>: 指定应在其中拍摄缩略图的视频中的时间戳数组。每个时间戳可能是一个数字（以秒为单位），百分比字符串（例如“ 50％”）或格式为“hh:mm:ss.xxx”的时间戳字符串（小时，分钟和毫秒均为可选）。</li>
<li><code>size</code>: 指定缩略图的目标大小（与<code>.size()</code>方法具有相同的格式）。注意：生成缩略图时，不应使用<code>.size()</code>方法。</li>
</ul>
<p><code>filename</code>选项为生成的文件指定文件名模式。它可能包含以下格式标记：</p>
<ul>
<li>&lsquo;%s&rsquo;: 偏移量（以秒为单位）</li>
<li>&lsquo;%w&rsquo;: 屏幕截图宽度</li>
<li>&lsquo;%h&rsquo;: 屏幕截图高度</li>
<li>&lsquo;%r&rsquo;: 屏幕截图分辨率（与'％wx％h&rsquo;相同）</li>
<li>&lsquo;%f&rsquo;: 输入文件名</li>
<li>&lsquo;%b&rsquo;: 输入基本名称（不带扩展名的文件名）</li>
<li>&lsquo;%i&rsquo;: 屏幕快照在时间标记数组中的索引（可以像％000i 这样使用它来补零）</li>
</ul>
<p>如果传递了多个时间戳，并且在文件名模式中未指定任何可变格式标记（'％s&rsquo;或'％i'），则将自动添加<code>_％i</code>。
生成缩略图时，将使用生成的文件名数组作为参数调度其他文件名事件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/video.avi&#39;</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;filenames&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">filenames</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Will generate &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">filenames</span>.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;, &#39;</span>))
  })
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Screenshots taken&#39;</span>)
  })
  .<span style="color:#a6e22e">screenshots</span>({
    <span style="color:#75715e">// Will take screens at 20%, 40%, 60% and 80% of the video
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">count</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span>,
    <span style="color:#a6e22e">folder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/path/to/output&#39;</span>
  })

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/video.avi&#39;</span>).<span style="color:#a6e22e">screenshots</span>({
  <span style="color:#a6e22e">timestamps</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">30.5</span>, <span style="color:#e6db74">&#39;50%&#39;</span>, <span style="color:#e6db74">&#39;01:10.123&#39;</span>],
  <span style="color:#a6e22e">filename</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;thumbnail-at-%s-seconds.png&#39;</span>,
  <span style="color:#a6e22e">folder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/path/to/output&#39;</span>,
  <span style="color:#a6e22e">size</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;320x240&#39;</span>
})
</code></pre></div><h3 id="controlling-the-ffmpeg-process">Controlling the FFmpeg process</h3>
<h4 id="killsignalsigkill-杀死任何正在运行的-ffmpeg-进程">kill([signal=&lsquo;SIGKILL&rsquo;]): 杀死任何正在运行的 ffmpeg 进程</h4>
<p>此方法将 signal（默认为“SIGKILL”）发送到 ffmpeg 进程。只有在处理开始时才有意义。发送终止过程的信号将导致发出 error 事件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/video.avi&#39;</span>)
  .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libmp3lame&#39;</span>)
  .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;start&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#75715e">// Send SIGSTOP to suspend ffmpeg
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">kill</span>(<span style="color:#e6db74">&#39;SIGSTOP&#39;</span>)

    <span style="color:#a6e22e">doSomething</span>(<span style="color:#66d9ef">function</span>() {
      <span style="color:#75715e">// Send SIGCONT to resume ffmpeg
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">kill</span>(<span style="color:#e6db74">&#39;SIGCONT&#39;</span>)
    })
  })
  .<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;/path/to/output.mp4&#39;</span>)

<span style="color:#75715e">// Kill ffmpeg after 60 seconds anyway
</span><span style="color:#75715e"></span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() {
  <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Ffmpeg has been killed&#39;</span>)
  })

  <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">kill</span>()
}, <span style="color:#ae81ff">60000</span>)
</code></pre></div><h4 id="reniceniceness0-更改-ffmpeg-进程优先级">renice([niceness=0]): 更改 ffmpeg 进程优先级</h4>
<p>此方法更改任何正在运行的 ffmpeg 进程（如果有）以及将来产生的任何进程的 niceness（优先级）值。<code>niceness</code>参数的范围可以从-20（最高优先级）到 20（最低优先级），并且默认值为 0（这是大多数*nix 系统上的默认过程友好度）。
注意：此方法在 Windows 平台上无效。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// Set startup niceness
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>)
  .<span style="color:#a6e22e">renice</span>(<span style="color:#ae81ff">5</span>)
  .<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;/path/to/output.mp4&#39;</span>)

<span style="color:#75715e">// Command takes too long, raise its priority
</span><span style="color:#75715e"></span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() {
  <span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">renice</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">5</span>)
}, <span style="color:#ae81ff">60000</span>)
</code></pre></div><h3 id="reading-video-metadata">Reading video metadata</h3>
<p>您可以使用模块ffprobe方法从任何有效的ffmpeg输入文件中读取元数据。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>.<span style="color:#a6e22e">ffprobe</span>(<span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">metadata</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">metadata</span>);
});
</code></pre></div><p>您也可以在FfmpegCommand上调用ffprobe方法以探查其输入之一。您可以将基于0的输入数字作为第一个参数传递，以指定从哪个输入中读取元数据，否则该方法将探测最后添加的输入。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file1.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/file2.avi&#39;</span>)
  .<span style="color:#a6e22e">ffprobe</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;file2 metadata:&#39;</span>);
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">data</span>);
  });

<span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/file1.avi&#39;</span>)
  .<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">&#39;/path/to/file2.avi&#39;</span>)
  .<span style="color:#a6e22e">ffprobe</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;file1 metadata:&#39;</span>);
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">data</span>);
  });
</code></pre></div><p><strong>警告</strong>：ffprobe可能会与输入流一起调用，但是在这种情况下，它将消耗流中的数据，并且该数据将不再可用于ffmpeg。除非流是实时流，否则在同一输入流上同时使用ffprobe和代码转换命令很可能会失败。仅当您知道自己在做什么时才这样做。</p>
<p>返回的对象与从外壳程序运行以下命令所返回的对象相同（取决于ffmpeg的版本，您可能必须将<code>-of</code>替换为<code>-print_format</code>）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">$ ffprobe -of json -show_streams -show_format /path/to/file.avi
</code></pre></div><p>它将包含有关容器（作为<code>format</code>键）和流数组（作为<code>stream</code>键）的信息。格式对象和每个流对象还包含元数据标签，具体取决于格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">{
  <span style="color:#e6db74">&#34;streams&#34;</span><span style="color:#f92672">:</span> [
    {
      <span style="color:#e6db74">&#34;index&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
      <span style="color:#e6db74">&#34;codec_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;h264&#34;</span>,
      <span style="color:#e6db74">&#34;codec_long_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10&#34;</span>,
      <span style="color:#e6db74">&#34;profile&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Constrained Baseline&#34;</span>,
      <span style="color:#e6db74">&#34;codec_type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;video&#34;</span>,
      <span style="color:#e6db74">&#34;codec_time_base&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1/48&#34;</span>,
      <span style="color:#e6db74">&#34;codec_tag_string&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;avc1&#34;</span>,
      <span style="color:#e6db74">&#34;codec_tag&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x31637661&#34;</span>,
      <span style="color:#e6db74">&#34;width&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">320</span>,
      <span style="color:#e6db74">&#34;height&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">180</span>,
      <span style="color:#e6db74">&#34;has_b_frames&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
      <span style="color:#e6db74">&#34;sample_aspect_ratio&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1:1&#34;</span>,
      <span style="color:#e6db74">&#34;display_aspect_ratio&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;16:9&#34;</span>,
      <span style="color:#e6db74">&#34;pix_fmt&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;yuv420p&#34;</span>,
      <span style="color:#e6db74">&#34;level&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">13</span>,
      <span style="color:#e6db74">&#34;r_frame_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;24/1&#34;</span>,
      <span style="color:#e6db74">&#34;avg_frame_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;24/1&#34;</span>,
      <span style="color:#e6db74">&#34;time_base&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1/24&#34;</span>,
      <span style="color:#e6db74">&#34;start_pts&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
      <span style="color:#e6db74">&#34;start_time&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0.000000&#34;</span>,
      <span style="color:#e6db74">&#34;duration_ts&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">14315</span>,
      <span style="color:#e6db74">&#34;duration&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;596.458333&#34;</span>,
      <span style="color:#e6db74">&#34;bit_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;702655&#34;</span>,
      <span style="color:#e6db74">&#34;nb_frames&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;14315&#34;</span>,
      <span style="color:#e6db74">&#34;disposition&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;default&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;dub&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;original&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;comment&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;lyrics&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;karaoke&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;forced&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;hearing_impaired&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;visual_impaired&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;clean_effects&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;attached_pic&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
      },
      <span style="color:#e6db74">&#34;tags&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;creation_time&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1970-01-01 00:00:00&#34;</span>,
        <span style="color:#e6db74">&#34;language&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;und&#34;</span>,
        <span style="color:#e6db74">&#34;handler_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\fVideoHandler&#34;</span>
      }
    },
    {
      <span style="color:#e6db74">&#34;index&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
      <span style="color:#e6db74">&#34;codec_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;aac&#34;</span>,
      <span style="color:#e6db74">&#34;codec_long_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;AAC (Advanced Audio Coding)&#34;</span>,
      <span style="color:#e6db74">&#34;codec_type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;audio&#34;</span>,
      <span style="color:#e6db74">&#34;codec_time_base&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1/48000&#34;</span>,
      <span style="color:#e6db74">&#34;codec_tag_string&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;mp4a&#34;</span>,
      <span style="color:#e6db74">&#34;codec_tag&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x6134706d&#34;</span>,
      <span style="color:#e6db74">&#34;sample_fmt&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;fltp&#34;</span>,
      <span style="color:#e6db74">&#34;sample_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;48000&#34;</span>,
      <span style="color:#e6db74">&#34;channels&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
      <span style="color:#e6db74">&#34;bits_per_sample&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
      <span style="color:#e6db74">&#34;r_frame_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0/0&#34;</span>,
      <span style="color:#e6db74">&#34;avg_frame_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0/0&#34;</span>,
      <span style="color:#e6db74">&#34;time_base&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1/48000&#34;</span>,
      <span style="color:#e6db74">&#34;start_pts&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
      <span style="color:#e6db74">&#34;start_time&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0.000000&#34;</span>,
      <span style="color:#e6db74">&#34;duration_ts&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">28619776</span>,
      <span style="color:#e6db74">&#34;duration&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;596.245333&#34;</span>,
      <span style="color:#e6db74">&#34;bit_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;159997&#34;</span>,
      <span style="color:#e6db74">&#34;nb_frames&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;27949&#34;</span>,
      <span style="color:#e6db74">&#34;disposition&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;default&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;dub&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;original&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;comment&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;lyrics&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;karaoke&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;forced&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;hearing_impaired&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;visual_impaired&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;clean_effects&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
        <span style="color:#e6db74">&#34;attached_pic&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
      },
      <span style="color:#e6db74">&#34;tags&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;creation_time&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1970-01-01 00:00:00&#34;</span>,
        <span style="color:#e6db74">&#34;language&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;und&#34;</span>,
        <span style="color:#e6db74">&#34;handler_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\fSoundHandler&#34;</span>
      }
    }
  ],
  <span style="color:#e6db74">&#34;format&#34;</span><span style="color:#f92672">:</span> {
    <span style="color:#e6db74">&#34;filename&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;http://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4&#34;</span>,
    <span style="color:#e6db74">&#34;nb_streams&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
    <span style="color:#e6db74">&#34;format_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;mov,mp4,m4a,3gp,3g2,mj2&#34;</span>,
    <span style="color:#e6db74">&#34;format_long_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;QuickTime / MOV&#34;</span>,
    <span style="color:#e6db74">&#34;start_time&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0.000000&#34;</span>,
    <span style="color:#e6db74">&#34;duration&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;596.459000&#34;</span>,
    <span style="color:#e6db74">&#34;size&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;64657027&#34;</span>,
    <span style="color:#e6db74">&#34;bit_rate&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;867211&#34;</span>,
    <span style="color:#e6db74">&#34;tags&#34;</span><span style="color:#f92672">:</span> {
      <span style="color:#e6db74">&#34;major_brand&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;isom&#34;</span>,
      <span style="color:#e6db74">&#34;minor_version&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;512&#34;</span>,
      <span style="color:#e6db74">&#34;compatible_brands&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;mp41&#34;</span>,
      <span style="color:#e6db74">&#34;creation_time&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1970-01-01 00:00:00&#34;</span>,
      <span style="color:#e6db74">&#34;title&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Big Buck Bunny&#34;</span>,
      <span style="color:#e6db74">&#34;artist&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Blender Foundation&#34;</span>,
      <span style="color:#e6db74">&#34;composer&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Blender Foundation&#34;</span>,
      <span style="color:#e6db74">&#34;date&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2008&#34;</span>,
      <span style="color:#e6db74">&#34;encoder&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Lavf52.14.0&#34;</span>
    }
  }
}
</code></pre></div><h3 id="查询ffmpeg功能">查询ffmpeg功能</h3>
<p>fluent-ffmpeg使您可以查询已安装的ffmpeg版本以获取受支持的格式，编解码器，编码器和过滤器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Ffmpeg</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fluent-ffmpeg&#39;</span>);

<span style="color:#a6e22e">Ffmpeg</span>.<span style="color:#a6e22e">getAvailableFormats</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">formats</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Available formats:&#39;</span>);
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">formats</span>);
});

<span style="color:#a6e22e">Ffmpeg</span>.<span style="color:#a6e22e">getAvailableCodecs</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">codecs</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Available codecs:&#39;</span>);
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">codecs</span>);
});

<span style="color:#a6e22e">Ffmpeg</span>.<span style="color:#a6e22e">getAvailableEncoders</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">encoders</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Available encoders:&#39;</span>);
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">encoders</span>);
});

<span style="color:#a6e22e">Ffmpeg</span>.<span style="color:#a6e22e">getAvailableFilters</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">filters</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Available filters:&#34;</span>);
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">filters</span>);
});

<span style="color:#75715e">// Those methods can also be called on commands
</span><span style="color:#75715e"></span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Ffmpeg</span>({ <span style="color:#a6e22e">source</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/path/to/file.avi&#39;</span> })
  .<span style="color:#a6e22e">getAvailableCodecs</span>(...);
</code></pre></div><p>这些方法使用每种可用格式，编解码器或过滤器的键将对象传递给其回调。
返回的格式对象如下所示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">{
  ...
  <span style="color:#a6e22e">mp4</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;MP4 (MPEG-4 Part 14)&#39;</span>,
    <span style="color:#a6e22e">canDemux</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">canMux</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
  },
  ...
}
</code></pre></div><ul>
<li><code>canDemux</code>指示ffmpeg是否能够从该格式提取流（解复用）</li>
<li><code>canMux</code>指示ffmpeg是否能够将流写入（mux）此格式</li>
</ul>
<p>编解码器的返回对象如下所示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">{
  ...
  <span style="color:#a6e22e">mp3</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;audio&#39;</span>,
    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;MP3 (MPEG audio layer 3)&#39;</span>,
    <span style="color:#a6e22e">canDecode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
    <span style="color:#a6e22e">canEncode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
    <span style="color:#a6e22e">intraFrameOnly</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">isLossy</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
    <span style="color:#a6e22e">isLossless</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
  },
  ...
}
</code></pre></div><ul>
<li><code>type</code>指示编解码器类型，“音频”，“视频”或“字幕”</li>
<li><code>canDecode</code>告诉ffmpeg是否能够使用此编解码器解码流</li>
<li><code>canEncode</code>告诉ffmpeg是否能够使用此编解码器对流进行编码</li>
</ul>
<p>根据您的ffmpeg版本（或者如果您使用avconv），可能会出现其他键，例如：</p>
<ul>
<li><code>directRendering</code>告诉编解码器是否可以直接在GPU RAM中呈现；对于转码无用</li>
<li><code>intraFrameOnly</code>告诉编解码器是否只能使用I-frames</li>
<li><code>isLossy</code>告诉编解码器是否可以进行有损编码/解码</li>
<li><code>isLossless</code>告诉编解码器是否可以进行无损编码/解码</li>
</ul>
<p>对于某些 ffmpeg/avcodec 版本，描述中包含了以“Foo编解码器（decoders：libdecodefoo）（encoders：libencodefoo）”形式出现的编码器/解码器。在这种情况下，您将改为使用那些编码器/解码器（由getAvailableCodecs返回的编解码器对象也将包括它们）。</p>
<p>返回的编码器对象如下所示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">{
  ...
  <span style="color:#a6e22e">libmp3lame</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;audio&#39;</span>,
    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;MP3 (MPEG audio layer 3) (codec mp3)&#39;</span>,
    <span style="color:#a6e22e">frameMT</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">sliceMT</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">experimental</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">drawHorizBand</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">directRendering</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
  },
  ...
}
</code></pre></div><ul>
<li><code>type</code>指示编码器类型，“音频”，“视频”或“字幕”</li>
<li><code>experimental</code>指示编码器是否为实验性。使用这种编解码器时，fluent-ffmpeg会自动添加“ -strict实验”标志。</li>
</ul>
<p>返回的过滤器对象如下所示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">{
  ...
  <span style="color:#a6e22e">scale</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Scale the input video to width:height size and/or convert the image format.&#39;</span>,
    <span style="color:#a6e22e">input</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;video&#39;</span>,
    <span style="color:#a6e22e">multipleInputs</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
    <span style="color:#a6e22e">output</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;video&#39;</span>,
    <span style="color:#a6e22e">multipleOutputs</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
  },
  ...
}
</code></pre></div><ul>
<li><code>input</code>告诉此过滤器操作的输入类型，“音频”，“视频”或“无”之一。如果为“none”，则过滤器可能不输出任何内容</li>
<li><code>multipleInputs</code>告诉过滤器是否可以接受多个输入</li>
<li><code>output</code>告诉此过滤器生成的输出类型，“音频”，“视频”或“无”之一。如果为“ none”，则过滤器没有输出（仅接收器）</li>
<li><code>multipleInputs</code>告诉过滤器是否可以生成多个输出</li>
</ul>
<h3 id="cloning-an-ffmpegcommand">Cloning an FfmpegCommand</h3>
<p>您可以通过调用clone（）方法来创建FfmpegCommand实例的副本。克隆将是被调用时原始副本的精确副本（相同的输入，相同的配置项，相同的事件处理程序等）。当您要在同一输入上应用不同的处理选项时，这主要有用。
在克隆上设置配置项，添加输入或事件处理程序不会影响原始命令。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// Create a command to convert source.avi to MP4
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">command</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ffmpeg</span>(<span style="color:#e6db74">&#39;/path/to/source.avi&#39;</span>)
  .<span style="color:#a6e22e">audioCodec</span>(<span style="color:#e6db74">&#39;libfaac&#39;</span>)
  .<span style="color:#a6e22e">videoCodec</span>(<span style="color:#e6db74">&#39;libx264&#39;</span>)
  .<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#39;mp4&#39;</span>);

<span style="color:#75715e">// Create a clone to save a small resized version
</span><span style="color:#75715e"></span><span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">clone</span>()
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;320x200&#39;</span>)
  .<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;/path/to/output-small.mp4&#39;</span>);

<span style="color:#75715e">// Create a clone to save a medium resized version
</span><span style="color:#75715e"></span><span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">clone</span>()
  .<span style="color:#a6e22e">size</span>(<span style="color:#e6db74">&#39;640x400&#39;</span>)
  .<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;/path/to/output-medium.mp4&#39;</span>);

<span style="color:#75715e">// Save a converted version with the original size
</span><span style="color:#75715e"></span><span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">save</span>(<span style="color:#e6db74">&#39;/path/to/output-original-size.mp4&#39;</span>);
</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>LuneShao </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://luneshao.github.io/2020/2020-04-07-fluent-ffmpeg-api/>https://luneshao.github.io/2020/2020-04-07-fluent-ffmpeg-api/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>
  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://luneshao.github.io/tags/ffmpeg/">
                    #ffmpeg</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://luneshao.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://luneshao.github.io/2020/2020-04-02-tencent-server-ssh/" class="prev" rel="prev" title="修改腾讯云默认远程连接端口"><i class="iconfont icon-left"></i>&nbsp;修改腾讯云默认远程连接端口</a>
         
        
        <a href="https://luneshao.github.io/2020/2020-04-09-riyupinyin/" class="next" rel="next" title="日语输入法">日语输入法&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
        <div id="vcomment"></div>
          
                 
          
    </div>
    <script>
        new Valine({
          el: '#vcomment' ,
          appId: 'VMtRNdHhQOQVoiWu2y2dQnJb-gzGzoHsz',
          appKey: '073437m7LGtKY9mmCQioFbKI',
          notify:true, 
          verify:false, 
          avatar:'wavatar', 
          recordIP: true,
          visitor: true, 
          placeholder: '你好哇，快来戳我吐槽吧！🎉' 
        })
    </script>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2022</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://luneshao.github.io/">LuneShao</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
